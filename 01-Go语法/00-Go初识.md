## 一 Go语言介绍
####  1.1 Go语言背景
Go语言的诞生是为了解决当下编程语言对并发支持不友好、编译速度慢、编程复杂这三个主要问题。  
Go既拥有接近静态编译语言（如C）的安全和性能，又有接近脚本语言（如python）的开发效率。  
Go语言主要特点：
 - 天然并发：语言层面支持并发，包括gorotuine、channel
 - 语法优势：没有历史包袱，多返回值，go协程支持等
与Java相比的不同：
- 不支持重载
- 代码规范严格：花括号位置固定，变量名大小写代表公有私有等
- 支持函数式编程：匿名函数，闭包
- 没有构造函数：
- 接口非侵入式：Java直接继承接口，造成耦合
```
    type Foo struct ｛		
        //接口中的内容直接书写在这里
    ｝
    //从此以后，没有继承树图，只用知道这个类实现了哪些方法;
    //也不用为实现接口引包，仅仅引用其中某个接口的定义即可
    var foo IFoo = new(Foo)   
```
#### 1.2 Go安装
推荐使用官方的安装包直接安装，下载地址：https://golang.org/dl/  
```
Win安装：
        打开Win安装包下一步下一步即可，默认安装在目录：c:\Go

Mac安装：
        需要预装Xcode，然后打开Mac安装包下一步下一步即可  

Linux安装：
        wget https://storage.googleapis.com/golang/go1.8.3.linux-amd64.tar.gz
        tar zxvf go*.tar.gz -C $GO_INSTALL_DIR  # $GO_INSTALL_DIR一般是：/usr/local/go
        # 配置环境
        vim /etc/profile
        export GOROOT=$GO_INSTALL_DIR       # 默认/usr/local/go/go,（新版go目录下还有一个go目录）
        export PATH=$PATH:$GOROOT/bin
        export GOPATH=$HOME/goproject       # 可选配置：Go项目目录
​        source /etc/profile 

安装完毕后，测试是否安装成功： go version
```
Go也拥有比较好的版本管理工具gvm，使用gvm安装go方式：
```
bash < <(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)
gvm install go1.8.3
gvm use go1.8.3 --default   # 使用default可以免去每次启动命令行都得配置GOROOT
```
容易混淆的环境：
```
GOROOT: Go的安装目录，比如c:/Go
GOPATH: Go的项目目录，1.1-1.7必须设置，1.8后Unix上默认为$HOME/go,Win上默认为%USERPROFILE%/go
        GOPATH允许多个目录，当有多个目录时，请注意分隔符，多个目录的时候Windows是分号，Linux系统是冒号，当有多个GOPATH时，默认会将go get的内容放在第一个目录下。
        GOPATH目录约定有三个子目录：
            src 存放源代码（比如：.go .c .h .s等）
            pkg 编译后生成的文件（比如：.a）
            bin 编译后生成的可执行文件（为了方便，可以把此目录加入到 $PATH 变量中，如果有多个gopath，那么使用${GOPATH//://bin:}/bin添加所有的bin目录）
```
#### 1.3 Hello World!
在GOPATH的项目目录中创建三个文件夹：bin，src，pkg，在src文件夹中新建一个hello.go文件：
```go
package main                        //每个程序都有且仅有一个main包
import "fmt"                        //多包导入：import ("fmt","os")
func main() {                       //主函数main只有一个
    fmt.Println("Hello World!")     //函数调用：包名.函数名
}
```
#### 1.4 编译步骤
```
# 编译
go build hello.go               //在同级目录下生成文件：hello
go build -o test hello.go       //指定生成的文件名为test（win下指令需要添加.exe）

# 运行
./hello                         //win下直接双击执行即可

# 省略上述步骤，直接执行执行
go run hello.go         
```
#### 1.5 Go执行流程
![](/images/Golang/语法-00.png)
两种执行流程的区别：  
- 先编译方式：可执行文件可以在任意没有go环境的机器上运行，（因为go依赖被打包进了可执行文件）
- 直接执行方式：源码执行时，依赖于机器上的go环境，没有go环境无法直接运行
#### 1.6 Go语法注意
- Go源文件以 "go" 为扩展名
- Go应用程序的执行入口是main()函数。这个是和其它编程语言(比如java/c)一致
- Go语言严格区分大小写
- Go不需要分号
- Go编译是一行一行执行，所以不能将类似两个 Print函数写在一行
- Go语言定义的变量或者import的包如果没有使用到，代码不能编译通过
- Go的注释使用 // 或者 /*  */
- 引入的包没有被使用，会报编译错误
## 二 常用Go命令
#### 2.1 常用命令汇总
```
go version：    获取Go版本
go help:        查看Go命令
go get：        获取远程包（需 提前安装 git或hg）
go build:       编译并生成可执行程序，可以用来检测是否编译通过
go run：        直接运行程序
go fmt：        格式化源码（部分IDE在保存时自动调用）
go install：    编译包文件并编译整个程序
go test：       读取源码目录下面名为*_test.go的文件，生成并运行测试用的可执行文件。
godoc -http:8000：开启一个本地8000端口的web文档
gdb 可执行程序名：调试Go编译出来的文件
```
#### 2.2 go fmt
go工具集中提供了一个go fmt命令 可以格式化你写好的代码文件：
```
go fmt <文件名>.go
```
使用go fmt命令，其实是调用了gofmt，而且需要参数-w，否则格式化结果不会写入文件。gofmt -w -l src，可以格式化整个项目。
常见参数：
- -l 显示那些需要格式化的文件
- -w 把改写后的内容直接写入到文件中，而不是作为结果打印到标准输出。
- -r 添加形如"a[b:len(a)] -> a[b:]"的重写规则，方便我们做批量替换
- -s 简化文件中的代码
- -d 显示格式化前后的diff而不是写入文件，默认是false
- -e 打印语法错误到标准输出。无此参数只会打印不同行的前10个错误。
#### 2.3 go install
这个命令在内部实际上分成了两步操作：
- 第一步是生成结果文件(可执行文件或者.a包)，
- 第二步会把编译好的结果移到\$GOPATH/pkg或者$GOPATH/bin。
  参数支持go build的编译参数。常用参数是 -v，可以查看底层执行信息。
#### 2.4 go tool
go tool下面下载聚集了很多命令，主要有2个：fix和vet
go tool fix ：
----用来修复以前老版本的代码到新版本，例如go1之前老版本的代码转化到
go1,例如API的变化
go tool vet directory|files 
----用来分析当前目录的代码是否都是正确的代码,例如是不是调用fmt.Printf里面的参数不正确，例如函数里面提前return了然后出现了无用代码之类的。
#### 2.5 go get
`go get`是go语言的获取原承包工具，不过使用该命令前必须配置GOPATH,而且依据不同的源码网站，还要安装不同的版本管理工具，比如从github上使用`go get`需要额外安装git。 
```
go get github.com/**/**     # -u 参数可以自动更新包和依赖
```
get下来的文件会安装在项目目录的pkg文件夹下。  
go get本质上可以理解为首先第一步是通过源码工具clone代码到src下面，然后执行`go install`。  
在代码中如何使用远程包，很简单的就是和使用本地包一样，只要在开头import相应的路径就可以：
```go
import "github.com/****/****"
```




