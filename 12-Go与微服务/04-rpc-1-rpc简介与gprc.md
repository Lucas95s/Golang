## 一 rpc概述  

RPC(Remote Procedure Call Protocol)——远程过程调用协议，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。  

简单来说，就是跟远程访问或者web请求差不多，都是一个client向远端服务器请求服务返回结果，但是web请求 使用的网络协议是http高层协议，而rpc所使用的协议多为TCP，是网络层协议，减少了信息的包装，加快了处理速度。  

RPC:远程过程调用协议，是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议，它假定某些传输协议存在，如TCP或UDP，以便为通信程序之间携带信息数据，通过它可以使函数调用模式网络化。在OSI网络通信模型中，RPC跨越了传输层和应用层。RPC使得开发包括网络分布式多程序在内的应用程序更加容易。
运行时，一次客户机对服务器的RPC调用，步骤如下：
> 1 调用客户端句柄，执行传送参数
> 2 调用本地系统内核发送网络消息
> 3 消息传送到远程主机
> 4 服务器句柄得到消息并得到参数
> 5 执行远程过程
> 6 返回执行结果给服务器句柄
> 7 服务器句柄返回结果，调用远程系统内核
> 8 消息传回本地主机
> 9 客户句柄由内核接收消息
> 10 客户接收句柄返回的数据

## 二 grpc

#### 2.1 grpc概念

在 gRPC里客户端应用可以像调用本地对象一样直接调用另一台不同的机器上服务端应用的方法，使得您能够更容易地创建分布式应用和服务。与许多 RPC系统类似， gRPC也是基于以下理念:
- 定义一个服务，指定其能够被远程调用的方法(包含参数和返回类型)。
- 在服务端实现这个接口，并运行一个 gRPC服务器来处理客户端调用。
- 在客户端拥有一个存根能够像服务端一样的方法。 gRPC客户端和服务端可以在多种环境中运行和交互 -从 google 内部的服务器到你自己的笔记本，并且可以用任何 gRPC支持的语言来编写。

所以，你可以很容易地用 Java创建一个 gRPC服务端，用 Go、 Python、Ruby来创建客户端。此外， Google最新 API将有 gRPC版本的接口，使你很容易地将 Google的功能集成到你的应用里。

#### 2.2 GRPC 与 protocol buffers

gRPC默认使用protoBuf，这是 Google开源的一套成熟的结构数据序列化机制(当然也可以使用其他数据格式如 JSON)。正如你将在下方例子里所看到的，你用 proto files创建 gRPC服务，用 protoBuf消息类型来定义方法参 数和返回类型。你可以在 Protocol Buffers文档找到更多关于 protoBuf的资料。 虽然你可以使用 proto2 (当前默 认的 protocol buffers版本 )，我们通常建议你在 gRPC里使用 proto3，因为这样你可以使用 gRPC支持全部范围的 的语言，并且能避免 proto2客户端与 proto3服务端交互时出现的兼容性问题，反之亦然。  

