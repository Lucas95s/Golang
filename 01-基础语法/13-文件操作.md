## 一 文件写入API概览

```go
package main

import (
	"fmt"
	"io"
	"os"
)

func main() {

	// 文件地址
	filename := "test.txt"

	// 创建文件
	//os.Create(filename)

	// 打开文件：获取文件指针
	//f, err := os.Open(filename)		// 默认打开的文件是只读的
	f, err := os.OpenFile(filename, os.O_APPEND | os.O_RDWR, os.ModeAppend)
	if err != nil {
		fmt.Println("open file err: ", err)
		return
	}
	//关闭文件
	defer f.Close()

	// 写入文件内容
	str := "hello world!"
	n, err := f.Write([]byte(str))
	if err != nil {
		fmt.Println("write err: ", err)
		return
	}
	fmt.Println("write number = ", n)

}
```

## 二 文件读取API概览

#### 2.1 直接读取

read实现的是按字节数读取：

```go
package main

import (
	"fmt"
	"io"
	"os"
)

func main() {

	// 文件地址
	filename := "test.txt"

	// 创建文件
	//os.Create(filename)

	// 打开文件：获取文件指针
	f, err := os.Open(filename)		// 默认打开的文件是只读的
	if err != nil {
		fmt.Println("open file err: ", err)
		return
	}
	//关闭文件
	defer f.Close()

	// 读取文件内容
	readByte := make([]byte, 128)			// 指定要读取的长度
	for {

		fmt.Println("f222==", f)
		n, err := f.Read(readByte)			// 将数据读取如切片，返回值 n 是实际读取到的字节数

		if err != nil && err != io.EOF{		// 如果读到了文件末尾：EOF 即 end of file
			fmt.Println("read file err: ", err)
			break
		}

		fmt.Println("read: ", string(readByte[:n]))
		if n < 128 {
			fmt.Print("read end")
			break
		}

	}

}
```

#### 2.2 利用bufio对象读取

bufio可以实现一行一行读取：

```go
package main

import (
	"bufio"
	"fmt"
	"io"
	"os"
)

func main() {

	// 文件地址
	filename := "test.txt"

	// 打开文件：获取文件指针
	f, err := os.Open(filename)		// 默认打开的文件是只读的
	if err != nil {
		fmt.Println("open file err: ", err)
		return
	}
	//关闭文件
	defer f.Close()

	// 创建读对象
	reader := bufio.NewReader(f)
	for {
		str, err := reader.ReadString('\n')
		if err != nil && err != io.EOF {
			fmt.Println("read err: ", err)
			break
		}
		fmt.Println("str = ", str)
		if err == io.EOF {
			fmt.Print("read end")
			break
		}
	}
}
```

#### 2.3 使用 io/ioutil 包

ioutil直接读取文件：
```go
	ret, err := ioutil.ReadFile("test.txt")
	if err != nil {
		fmt.Println("read err :", err)
		return
	}
	fmt.Println(string(ret))
```

#### 2.4 读取命令行输入

在Unix设计思想中，一切皆文件，命令行输入也可以作为文件读入：
```go
    reader := bufio.NewReader(os.Stdin)
```